import{_ as S,P as U,Q as p,a0 as h,T as e,S as a,aF as w,a2 as b,V as t,aD as _,aB as c,aC as r,U as u,a1 as Q,W as m,Z as P,R as E,X as V,at as C}from"./index.c4086af6.js";import{Q as g,a as v}from"./QSelect.3573f4df.js";import{a as A,d as I,e as k,f}from"./format.c2a6ac4a.js";import{Q as D}from"./QPage.90566d84.js";import{P as N}from"./ProductCard.60de8cbe.js";import{I as q}from"./Imprimir.7e3f01ee.js";import"./QChip.3424dcff.js";import"./QImg.7ba94d32.js";import"./index.aa4d44c1.js";const L={components:{ProductCard:N},data(){return{search:"",products:[],categories:[],productsAll:[],client:{ci:"",name:""},recibido:"",saleDialog:!1,loading:!1}},created(){this.getProducts(),this.getCategories()},methods:{salePost(){this.loading=!0,this.$axios.post("sales",{client:this.client,products:this.$store.orders,mesa:this.client.mesa,pago:this.client.pago}).then(s=>{this.$store.orders=[],this.saleDialog=!1,this.$alert.success("Venta realizada"),q.recibo(s.data)}).catch(s=>{this.$alert.error("Error al realizar la venta")}).finally(()=>{this.loading=!1})},textUpperCase(){this.client.name=this.client.name.toUpperCase()},searchClient(){if(console.log(this.client.ci),this.client.ci===""||this.client.ci===0||this.client.ci===null)return this.client.name="SN",!1;this.client.ci!=null&&this.$axios.get(`searchClient/${this.client.ci}`).then(s=>{var o;this.client.name=(o=s.data)==null?void 0:o.name})},pay(){if(this.$store.orders.length===0)return this.$alert.error("Debe agregar productos al carrito"),!1;this.recibido="",this.saleDialog=!0,this.client={ci:0,name:"SN",mesa:"MESA",pago:"EFECTIVO"}},categoryClick(s){s.id===""?this.products=this.productsAll:this.products=this.productsAll.filter(o=>o.category_id===s.id)},productClick(s){const o=this.$store.orders.find(x=>x.id===s.id);o?o.cantidadSale+=1:this.$store.orders.push({id:s.id,name:s.name,price:s.price,cantidadSale:1})},getCategories(){this.$axios.get("categories").then(s=>{this.categories=s.data})},getProducts(){this.loading=!0,this.$axios.get("products").then(s=>{this.products=s.data,this.productsAll=s.data}).finally(()=>{this.loading=!1})},productFilter(s){s===""?this.products=this.productsAll:this.products=this.productsAll.filter(o=>o.name.toLowerCase().includes(s.toLowerCase()))}},computed:{categoryMoreAll(){return[{id:"",name:"Todo",icon:"fa-solid fa-globe"},...this.categories]}}},B={class:"row"},F={class:"col-12 col-md-8"},T={class:"row"},z={class:"col-12 col-md-4"},R=t("div",{class:"col-12 col-md-2"},null,-1),M=t("div",{class:"col-12 col-md-6 text-right"},null,-1),O={class:"col-12"},Y={class:"col-12 col-md-4"},G=t("div",{class:"text-subtitle1 text-bold text-black"}," Carrito ",-1),W={class:"row"},X={class:"col-12"},Z={class:"row"},j={class:"col-6"},H={class:"col-6"},J={class:"col-12"},K=t("div",{class:"text-bold text-black"}," Total ",-1),$={class:"text-bold text-h5 text-red"},ee={class:"col-12"},le=t("div",{class:"text-h6 text-bold"}," Pago ",-1),te={class:"text-bold text-center"},se={class:"row"},oe={class:"col-12 col-md-4 text-red text-subtitle1 text-bold"},ie={class:"col-12 col-md-4"},ae={class:"col-12 col-md-4 text-blue text-subtitle1 text-bold"},de={key:0},ne={class:"row"},ce={class:"col-12 col-md-4 q-pa-xs"},re={class:"col-12 col-md-4 q-pa-xs"},ue={class:"col-12 col-md-4 q-pa-xs"},me={class:"col-12 col-md-4 q-pa-xs"},pe={class:"col-12 col-md-12 flex flex-center"},he=t("div",{id:"myelement",class:"hidden"},null,-1);function _e(s,o,x,ge,i,n){const y=U("ProductCard");return p(),h(b,null,[e(D,{class:"bg-grey-3 q-pa-xs"},{default:a(()=>[e(_,null,{default:a(()=>[e(c,{class:"q-pa-xs"},{default:a(()=>[t("div",B,[t("div",F,[t("div",T,[t("div",z,[e(r,{modelValue:i.search,"onUpdate:modelValue":[o[0]||(o[0]=l=>i.search=l),n.productFilter],label:"Buscar",outlined:"",dense:"",clearable:"",loading:i.loading},null,8,["modelValue","onUpdate:modelValue","loading"])]),R,M,t("div",O,[e(y,{products:i.products,categories:n.categoryMoreAll,onProductClick:n.productClick,onCategoryClick:n.categoryClick},null,8,["products","categories","onProductClick","onCategoryClick"])])])]),t("div",Y,[e(_,null,{default:a(()=>[e(c,{class:"q-pa-xs row items-center bg-yellow"},{default:a(()=>[G,e(g),e(u,{color:"red",label:"Limpiar Carrito",dense:"","no-caps":"",class:"text-bold",size:"10px",icon:"o_delete",onClick:o[1]||(o[1]=l=>s.$store.orders=[]),loading:i.loading},null,8,["loading"])]),_:1}),e(c,{class:"q-pa-xs"},{default:a(()=>[t("div",W,[t("div",X,[e(A,{bordered:"",dense:""},{default:a(()=>[(p(!0),h(b,null,Q(s.$store.orders,l=>(p(),E(I,{key:l.id},{default:a(()=>[e(k,null,{default:a(()=>[e(f,{class:"text-bold"},{default:a(()=>[V(m(l.name),1)]),_:2},1024),e(f,{caption:""},{default:a(()=>[t("div",Z,[t("div",j,[e(r,{modelValue:l.price,"onUpdate:modelValue":d=>l.price=d,dense:"",outlined:"",type:"number",step:"0.01"},{prepend:a(()=>[e(C,{name:"fa-solid fa-dollar-sign",size:"10px"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),t("div",H,[e(r,{modelValue:l.cantidadSale,"onUpdate:modelValue":d=>l.cantidadSale=d,dense:"",outlined:"",type:"number"},{prepend:a(()=>[e(C,{name:"fa-solid fa-shopping-cart",size:"10px"})]),_:2},1032,["modelValue","onUpdate:modelValue"])])])]),_:2},1024)]),_:2},1024),e(k,{class:"text-right",side:""},{default:a(()=>[e(f,{class:"text-red text-bold text-h6"},{default:a(()=>[V(m((l.price*l.cantidadSale).toFixed(2))+" ",1),e(u,{dense:"",flat:"",rounded:"",icon:"delete",size:"10px",color:"red",onClick:d=>s.$store.orders.splice(s.$store.orders.indexOf(l),1)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),t("div",J,[e(c,{class:"q-pa-xs row items-center"},{default:a(()=>[K,e(g),t("div",$,m(s.$store.orders.reduce((l,d)=>l+d.price*d.cantidadSale,0).toFixed(2))+" Bs ",1)]),_:1})]),t("div",ee,[e(c,{class:"q-pa-xs"},{default:a(()=>[e(u,{color:"indigo",label:"Pagar",dense:"","no-caps":"",class:"full-width text-bold",size:"lg",icon:"shopping_cart",onClick:n.pay,loading:i.loading},null,8,["onClick","loading"])]),_:1})])])]),_:1})]),_:1})])])]),_:1})]),_:1})]),_:1}),e(w,{modelValue:i.saleDialog,"onUpdate:modelValue":o[8]||(o[8]=l=>i.saleDialog=l),persistent:""},{default:a(()=>[e(_,{style:{width:"700px","max-width":"90vh"}},{default:a(()=>[e(c,{class:"q-pa-xs row items-center"},{default:a(()=>[le,e(g),e(u,{flat:"",dense:"",icon:"close",onClick:o[2]||(o[2]=l=>i.saleDialog=!1)})]),_:1}),e(c,{class:""},{default:a(()=>[t("div",te,[t("div",se,[t("div",oe," Total :"+m(s.$store.orders.reduce((l,d)=>l+d.price*d.cantidadSale,0).toFixed(2))+" Bs ",1),t("div",ie,[e(r,{modelValue:i.recibido,"onUpdate:modelValue":o[3]||(o[3]=l=>i.recibido=l),label:"Monto recibido",outlined:"",dense:"",clearable:""},null,8,["modelValue"])]),t("div",ae,[i.recibido!==""?(p(),h("div",de," Cambio :"+m((i.recibido-s.$store.orders.reduce((l,d)=>l+d.price*d.cantidadSale,0)).toFixed(2))+" Bs ",1)):P("",!0)])])])]),_:1}),e(c,null,{default:a(()=>[t("div",ne,[t("div",ce,[e(r,{modelValue:i.client.ci,"onUpdate:modelValue":[o[4]||(o[4]=l=>i.client.ci=l),n.searchClient],label:"Numero",outlined:"",dense:"",clearable:"",debounce:"300"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",re,[e(r,{modelValue:i.client.name,"onUpdate:modelValue":[o[5]||(o[5]=l=>i.client.name=l),n.textUpperCase],label:"Nombre",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),t("div",ue,[e(v,{modelValue:i.client.mesa,"onUpdate:modelValue":o[6]||(o[6]=l=>i.client.mesa=l),label:"Nombre",outlined:"",dense:"",options:["MESA","LLEVAR","DELIVERY"]},null,8,["modelValue"])]),t("div",me,[e(v,{modelValue:i.client.pago,"onUpdate:modelValue":o[7]||(o[7]=l=>i.client.pago=l),label:"Nombre",outlined:"",dense:"",options:["EFECTIVO","TARGETA","ONLINE","QR","DELIVERY"]},null,8,["modelValue"])]),t("div",pe,[e(u,{color:"red-8",label:"Pagar",dense:"","no-caps":"",class:"text-bold full-width",icon:"shopping_cart",onClick:n.salePost,loading:i.loading},null,8,["onClick","loading"])])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),he],64)}var Ue=S(L,[["render",_e]]);export{Ue as default};
