import{_ as y,P as U,Q as p,a0 as h,T as e,S as a,aF as w,a2 as b,V as t,aD as _,aB as c,aC as r,U as u,a1 as P,W as m,Z as Q,R as A,X as V,at as C}from"./index.5450a623.js";import{Q as g,a as v}from"./QSelect.b7cea9d8.js";import{a as E,d as D,e as k,f}from"./format.72799b7d.js";import{Q as I}from"./QPage.edb18270.js";import{P as q}from"./ProductCard.7f734bcf.js";import{I as N}from"./Imprimir.0e46887f.js";import"./QChip.d02e0ad9.js";import"./QImg.55e2b244.js";import"./index.aa4d44c1.js";const B={components:{ProductCard:q},data(){return{search:"",products:[],categories:[],productsAll:[],client:{ci:"",name:""},recibido:"",saleDialog:!1,loading:!1}},created(){this.getProducts(),this.getCategories()},methods:{salePost(){this.loading=!0,this.$axios.post("sales",{client:this.client,products:this.$store.orders,mesa:this.client.mesa,pago:this.client.pago,comment:this.client.comment}).then(o=>{this.$store.orders=[],this.saleDialog=!1,this.$alert.success("Venta realizada"),N.recibo(o.data)}).catch(o=>{this.$alert.error("Error al realizar la venta")}).finally(()=>{this.loading=!1})},textUpperCase(){this.client.name=this.client.name.toUpperCase()},searchClient(){if(console.log(this.client.ci),this.client.ci===""||this.client.ci===0||this.client.ci===null)return this.client.name="SN",!1;this.client.ci!=null&&this.$axios.get(`searchClient/${this.client.ci}`).then(o=>{var s;this.client.name=(s=o.data)==null?void 0:s.name})},pay(){if(this.$store.orders.length===0)return this.$alert.error("Debe agregar productos al carrito"),!1;this.recibido="",this.saleDialog=!0,this.client={ci:0,name:"SN",mesa:"MESA",pago:"EFECTIVO"}},categoryClick(o){o.id===""?this.products=this.productsAll:this.products=this.productsAll.filter(s=>s.category_id===o.id)},productClick(o){const s=this.$store.orders.find(x=>x.id===o.id);s?s.cantidadSale+=1:this.$store.orders.push({id:o.id,name:o.name,price:o.price,cantidadSale:1})},getCategories(){this.$axios.get("categories").then(o=>{this.categories=o.data})},getProducts(){this.loading=!0,this.$axios.get("listproducts").then(o=>{this.products=o.data,this.productsAll=o.data}).finally(()=>{this.loading=!1})},productFilter(o){o===""?this.products=this.productsAll:this.products=this.productsAll.filter(s=>s.name.toLowerCase().includes(o.toLowerCase()))}},computed:{categoryMoreAll(){return[{id:"",name:"Todo",icon:"fa-solid fa-globe"},...this.categories]}}},F={class:"row"},L={class:"col-12 col-md-8"},T={class:"row"},z={class:"col-12 col-md-4"},M=t("div",{class:"col-12 col-md-2"},null,-1),O=t("div",{class:"col-12 col-md-6 text-right"},null,-1),R={class:"col-12"},Y={class:"col-12 col-md-4"},J=t("div",{class:"text-subtitle1 text-bold text-black"}," Carrito ",-1),W={class:"row"},X={class:"col-12"},Z={class:"row"},j={class:"col-6"},G={class:"col-6"},H={class:"col-12"},K=t("div",{class:"text-bold text-black"}," Total ",-1),$={class:"text-bold text-h5 text-red"},ee={class:"col-12"},le=t("div",{class:"text-h6 text-bold"}," Pago ",-1),te={class:"text-bold text-center"},se={class:"row"},oe={class:"col-12 col-md-4 text-red text-subtitle1 text-bold"},ie={class:"col-12 col-md-4"},ae={class:"col-12 col-md-4 text-blue text-subtitle1 text-bold"},de={key:0},ne={class:"row"},ce={class:"col-12 col-md-4 q-pa-xs"},re={class:"col-12 col-md-4 q-pa-xs"},ue={class:"col-12 col-md-4 q-pa-xs"},me={class:"col-12 col-md-4 q-pa-xs"},pe={class:"col-12 col-md-12 q-pa-xs"},he={class:"col-12 col-md-12 flex flex-center"},_e=t("div",{id:"myelement",class:"hidden"},null,-1);function ge(o,s,x,fe,i,n){const S=U("ProductCard");return p(),h(b,null,[e(I,{class:"bg-grey-3 q-pa-xs"},{default:a(()=>[e(_,null,{default:a(()=>[e(c,{class:"q-pa-xs"},{default:a(()=>[t("div",F,[t("div",L,[t("div",T,[t("div",z,[e(r,{modelValue:i.search,"onUpdate:modelValue":[s[0]||(s[0]=l=>i.search=l),n.productFilter],label:"Buscar",outlined:"",dense:"",clearable:"",loading:i.loading},null,8,["modelValue","onUpdate:modelValue","loading"])]),M,O,t("div",R,[e(S,{products:i.products,categories:n.categoryMoreAll,onProductClick:n.productClick,onCategoryClick:n.categoryClick},null,8,["products","categories","onProductClick","onCategoryClick"])])])]),t("div",Y,[e(_,null,{default:a(()=>[e(c,{class:"q-pa-xs row items-center bg-yellow"},{default:a(()=>[J,e(g),e(u,{color:"red",label:"Limpiar Carrito",dense:"","no-caps":"",class:"text-bold",size:"10px",icon:"o_delete",onClick:s[1]||(s[1]=l=>o.$store.orders=[]),loading:i.loading},null,8,["loading"])]),_:1}),e(c,{class:"q-pa-xs"},{default:a(()=>[t("div",W,[t("div",X,[e(E,{bordered:"",dense:""},{default:a(()=>[(p(!0),h(b,null,P(o.$store.orders,l=>(p(),A(D,{key:l.id},{default:a(()=>[e(k,null,{default:a(()=>[e(f,{class:"text-bold"},{default:a(()=>[V(m(l.name),1)]),_:2},1024),e(f,{caption:""},{default:a(()=>[t("div",Z,[t("div",j,[e(r,{modelValue:l.price,"onUpdate:modelValue":d=>l.price=d,dense:"",outlined:"",type:"number",step:"0.01"},{prepend:a(()=>[e(C,{name:"fa-solid fa-dollar-sign",size:"10px"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),t("div",G,[e(r,{modelValue:l.cantidadSale,"onUpdate:modelValue":d=>l.cantidadSale=d,dense:"",outlined:"",type:"number"},{prepend:a(()=>[e(C,{name:"fa-solid fa-shopping-cart",size:"10px"})]),_:2},1032,["modelValue","onUpdate:modelValue"])])])]),_:2},1024)]),_:2},1024),e(k,{class:"text-right",side:""},{default:a(()=>[e(f,{class:"text-red text-bold text-h6"},{default:a(()=>[V(m((l.price*l.cantidadSale).toFixed(2))+" ",1),e(u,{dense:"",flat:"",rounded:"",icon:"delete",size:"10px",color:"red",onClick:d=>o.$store.orders.splice(o.$store.orders.indexOf(l),1)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),t("div",H,[e(c,{class:"q-pa-xs row items-center"},{default:a(()=>[K,e(g),t("div",$,m(o.$store.orders.reduce((l,d)=>l+d.price*d.cantidadSale,0).toFixed(2))+" Bs ",1)]),_:1})]),t("div",ee,[e(c,{class:"q-pa-xs"},{default:a(()=>[e(u,{color:"indigo",label:"Pagar",dense:"","no-caps":"",class:"full-width text-bold",size:"lg",icon:"shopping_cart",onClick:n.pay,loading:i.loading},null,8,["onClick","loading"])]),_:1})])])]),_:1})]),_:1})])])]),_:1})]),_:1})]),_:1}),e(w,{modelValue:i.saleDialog,"onUpdate:modelValue":s[9]||(s[9]=l=>i.saleDialog=l),persistent:""},{default:a(()=>[e(_,{style:{width:"700px","max-width":"90vh"}},{default:a(()=>[e(c,{class:"q-pa-xs row items-center"},{default:a(()=>[le,e(g),e(u,{flat:"",dense:"",icon:"close",onClick:s[2]||(s[2]=l=>i.saleDialog=!1)})]),_:1}),e(c,{class:""},{default:a(()=>[t("div",te,[t("div",se,[t("div",oe," Total :"+m(o.$store.orders.reduce((l,d)=>l+d.price*d.cantidadSale,0).toFixed(2))+" Bs ",1),t("div",ie,[e(r,{modelValue:i.recibido,"onUpdate:modelValue":s[3]||(s[3]=l=>i.recibido=l),label:"Monto recibido",outlined:"",dense:"",clearable:""},null,8,["modelValue"])]),t("div",ae,[i.recibido!==""?(p(),h("div",de," Cambio :"+m((i.recibido-o.$store.orders.reduce((l,d)=>l+d.price*d.cantidadSale,0)).toFixed(2))+" Bs ",1)):Q("",!0)])])])]),_:1}),e(c,null,{default:a(()=>[t("div",ne,[t("div",ce,[e(r,{modelValue:i.client.ci,"onUpdate:modelValue":[s[4]||(s[4]=l=>i.client.ci=l),n.searchClient],label:"Numero",outlined:"",dense:"",clearable:"",debounce:"300"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",re,[e(r,{modelValue:i.client.name,"onUpdate:modelValue":[s[5]||(s[5]=l=>i.client.name=l),n.textUpperCase],label:"Nombre",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),t("div",ue,[e(v,{modelValue:i.client.mesa,"onUpdate:modelValue":s[6]||(s[6]=l=>i.client.mesa=l),label:"Nombre",outlined:"",dense:"",options:["MESA","LLEVAR","DELIVERY","PEDIDOS YA"]},null,8,["modelValue"])]),t("div",me,[e(v,{modelValue:i.client.pago,"onUpdate:modelValue":s[7]||(s[7]=l=>i.client.pago=l),label:"Nombre",outlined:"",dense:"",options:["EFECTIVO","TARJETA","ONLINE","QR"]},null,8,["modelValue"])]),t("div",pe,[e(r,{modelValue:i.client.comment,"onUpdate:modelValue":s[8]||(s[8]=l=>i.client.comment=l),label:"Comentario",outlined:"",dense:""},null,8,["modelValue"])]),t("div",he,[e(u,{color:"red-8",label:"Pagar",dense:"","no-caps":"",class:"text-bold full-width",icon:"shopping_cart",onClick:n.salePost,loading:i.loading},null,8,["onClick","loading"])])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),_e],64)}var we=y(B,[["render",ge]]);export{we as default};
